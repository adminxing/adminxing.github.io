<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0, maximum-scale=1,user-scalable=no">
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="black" name="apple-mobile-web-app-status-bar-style">
<meta content="telephone=no" name="format-detection">
<meta content="email=no" name="format-detection">
<link rel="stylesheet" type="text/css" href="./css/reset.css">
<link rel="stylesheet" type="text/css" href="./css/style1.css">
<title>imtoken</title>
<script type="text/javascript" src="./js/rem.js"></script>
</head>
<body style="background-color:#f0f1f3">
<div class="titbox">
  <div class="xxbox">
    <p>该密码将作为身份下多链钱包的交易密码。</p>
    <p>imToken不会存储密码，也无法帮你找回密码，请务必妥善保存。</p>
  </div>
</div>
<header>
  <div class="header"> <a href="javascript:window.history.back()" class="fl"><img src="./imgs/back.png"></a> <a href="javascript:void(0)" class="fr"><img src="./imgs/why.png"></a> </div>
</header>
<div class="container">
  <div class="hdtitle">
    <h2 class="l_title">创建身份</h2>
    <p class="l_p">设定你的身份名，并创建一组密码，你将拥有全新的多链钱包。</p>
    <span>什么是身份？</span> </div>
  <div class="ubox">
    <p>创建密码</p>
    <div class="ls">
      <input type="text" name="uname" id="uname" maxlength="12" placeholder="输入1-12个字符">
    </div>
    <div class="errtit" id="uerr">你可以随时再”钱包管理“，中更改身份名称。</div>
  </div>
  <div class="pwdbox">
    <p>身份名称</p>
    <div class="ls">
      <div class="fbox">
        <input type="password" name="upwd" id="upwd" maxlength="18" placeholder="输入密码">
        <div class="grade">
          <dl>
            <dt>弱</dt>
            <dd><i></i><i></i><i></i><i></i></dd>
          </dl>
        </div>
      </div>
      <div class="lines"></div>
      <div class="fbox">
      <input type="password" name="reupwd" id="reupwd" maxlength="18" placeholder="重复输入密码">
      <img src="./imgs/hide.png" onclick="isShow(this)" alt="">
      </div>
    </div>
    <div class="errtit" id="perr">不少于8个字符，建议混合大小写字母、数字、符号。</div>
  </div>
  
  <div class="ubox" style="margin-top:0.2rem">
    <p>密码提示（可选）</p>
    <div class="ls">
      <input type="text" name="pwdtit" id="pwdtit" placeholder="输入提醒文字">
    </div>
  </div>
  <div class="chkbox">我已阅读并同意<span>imToken 服务条款</span></div>
  <button id="next" class="btn" disabled>创建</button>
</div>

<!-- 弹窗 -->
<div class="model" id="addmod"> <img src="./imgs/load2.gif" style="">
  <p>创建中</p>
</div>
<div class="model" id="sucmod"> <img src="./imgs/ok.png">
  <p>创建成功</p>
</div>
<div class="tmbg" id="tcshow">
<div class="tcbox">
<h4></h4>
<img src="./imgs/tubg.png" >
<h3>什么是身份?</h3>
<p>创建身份之后，你将拥有新的多链钱包，同时支持 ETH, BTC, ATOM 等。</p>
<p>你可以使用该身份的助记词(12个英文单词)来轻松地恢复在该身份下创建的钱包。</p>
<button id="btok">我知道了</button>
</div>
</div>
<script type="text/javascript" src="./js/jquery.min.js"></script> 
<script type="text/javascript" src="./layer/layer.js"></script> 
<script type="text/javascript">
function lalert(msg)
{
	layer.msg(msg);	
}
function chktxt()
{
	var uname=$('#uname').val();
	var upwd=$('#upwd').val();
	var reupwd=$('#reupwd').val();
	if(uname!='' && upwd!='' && reupwd!='')
	{
		$('#next').addClass('btn_active');
		$('#next').removeAttr('disabled');
	}
	else
	{
		$('#next').removeClass('btn_active');
		$('#next').attr('disabled','disabled');
	}
	
}
$(function(){
	setTimeout(function(){$('#tcshow').css('display','block');},300);
	setTimeout(function(){$('.tcbox').css('bottom','0');},500);
	$('#btok').bind('click',function(){
			$('.tcbox').css('bottom','-80%');
			setTimeout(function(){$('#tcshow').css('display','none');},500);
	});
	$('#uname').bind('focus',function(){
	     	$('#uerr').css("display","block");
	});
	$('#uname').bind('blur',function(){
	     	$('#uerr').css("display","none");
	});
	$('#upwd').bind('focus',function(){
	     	$('.titbox').addClass('titcur');
			$('#titpwd').css('display','block');
			$('#perr').css("display","block");
	});
	$('#upwd').bind('blur',function(){
	     	$('.titbox').removeClass('titcur');
			$('#titpwd').css('display','none');
			$('#perr').css("display","none");
	});
   $('#uname').bind('keyup',function(){chktxt()});
   $('#upwd').bind('keyup',function(){chktxt();
      var p=$('#upwd').val();
	  if(p.length>0)
	  {
		  $('#perr').text(p.length+'字符');
		  $('.grade').show();
	  }else
	  {
		  $('#perr').text('不少于8个字符，建议混合大小写字母、数字、符号。');
		  $('.grade').hide();
	  }
   });
   $('#reupwd').bind('keyup',function(){chktxt()});
   $('#next').bind('click',function(){
	      var uname=$('#uname').val();
		  if(uname=='')
		  {
			  lalert('身份名不能为空，请重新输入！');
			  $('#uname').focus();
			  return;
		  }
		  var upwd=$('#upwd').val();
		  if(upwd.length<8)
		  {
			  lalert('密码不能小于8位字符！');
			  $('#upwd').focus();
			  return;
		  }
		  var reupwd=$('#reupwd').val();
		  if(upwd!=reupwd)
		  {
			  lalert('两次密码输入不一致！');
			  $('#reupwd').focus();
			  return;
		  }
		   $('#next').attr('disabled','disabled');
		   $('#next').text('创建中...');
		   $('#addmod').css('display','block');
		   //setTimeout(function(){$('#addmod').css('display','none');$('#sucmod').css('display','block');},2000);
		   setTimeout(function(){window.location.href='addbanknote.html'},3000);
		  
	   })	
});

	$('.l_input li span').click(function(){
		$(this).addClass('sm')
		$(this).prev().focus();
		if($(this).parent().index() == 1){
			$('.grade').show()
		}
	})

	$('.l_input li input').blur(function(){
		if($(this).val().length > 0){
			return
		}else{
			$(this).next('span').removeClass('sm')
		}
		
	})

    function isShow(obj){
    	console.log($("input[name='upwd'").attr("type"))
    	if($("input[name='upwd'").attr("type") == "password"){
    		$(obj).attr("src","./imgs/show.png");
    		$("input[name='upwd'").attr("type","text");
			$("input[name='reupwd'").attr("type","text")
    	}else{
    		$(obj).attr("src","./imgs/hide.png");
    		$("input[name='upwd'").attr("type","password");
			$("input[name='reupwd'").attr("type","password")
    	}
    }

	function found() {
		// if(成功)
		$('.model').show()
		setTimeout(function(){
			$('.model').hide()
		},600)
	}


	 $("#upwd").bind('input propertychange', function() {
        var _val = $(this).val();
        if(_val.length <= 3) {
        	$('.grade dl dt').text('弱')
        	$('.grade dl dd i').removeClass('active')
        }

        if(_val.length > 3 && _val.length <= 6){
        	$('.grade dl dt').text('弱')
        	$('.grade dl dd i').eq(3).addClass('active')
        	$('.grade dl dd i').eq(2).removeClass('active')
        	$('.grade dl dd i').eq(1).removeClass('active')
        	$('.grade dl dd i').eq(0).removeClass('active')
        }
        if(_val.length > 6 && _val.length <= 8){
        	$('.grade dl dt').text('一般')
        	$('.grade dl dd i').eq(3).addClass('active')
        	$('.grade dl dd i').eq(2).addClass('active')
        	$('.grade dl dd i').eq(1).removeClass('active')
        	$('.grade dl dd i').eq(0).removeClass('active')
        }
        if(_val.length > 8 && _val.length <= 10){
        	$('.grade dl dt').text('强')
        	$('.grade dl dd i').eq(3).addClass('active')
        	$('.grade dl dd i').eq(2).addClass('active')
        	$('.grade dl dd i').eq(1).addClass('active')
        	$('.grade dl dd i').eq(0).removeClass('active')
        }else{

        }
        if(_val.length > 10){
        	$('.grade dl dt').text('很好')
        	$('.grade dl dd i').addClass('active')
        }
     })
</script>
</body>
</html>